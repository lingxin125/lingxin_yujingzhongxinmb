<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>交易统计</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'postal-green': '#00A651',
                        'postal-green-dark': '#008A43'
                    }
                }
            }
        }
    </script>
    <style>
        /* 强制移动端适配 */
        * {
            box-sizing: border-box;
        }
        
        html, body {
            width: 100%;
            max-width: 100%;
            overflow-x: hidden;
        }
        
        /* 确保在所有设备上都有正确的边距 */
        .mobile-container {
            width: 100%;
            max-width: 100vw;
            margin: 0;
            padding: 0;
        }
        
        .mobile-content {
            margin-left: 1rem;
            margin-right: 1rem;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans mobile-container">
    <!-- Status Bar -->
    <div class="bg-black text-white text-xs py-1 flex justify-between items-center">
        <div class="flex items-center space-x-1 pl-4">
            <span>9:57</span>
            <div class="w-4 h-3 bg-orange-500 rounded-sm"></div>
            <span>•••</span>
        </div>
        <div class="flex items-center space-x-1 text-xs pr-4">
            <span>775 KB/s</span>
            <div class="w-4 h-4 bg-white rounded-full flex items-center justify-center">
                <div class="w-2 h-2 bg-black rounded-full"></div>
            </div>
            <span>5G</span>
            <div class="flex space-x-0.5">
                <div class="w-1 h-3 bg-white"></div>
                <div class="w-1 h-3 bg-white"></div>
                <div class="w-1 h-3 bg-white"></div>
                <div class="w-1 h-3 bg-white"></div>
            </div>
            <div class="w-6 h-3 border border-white rounded-sm">
                <div class="w-1/4 h-full bg-white rounded-sm"></div>
            </div>
            <span>25</span>
        </div>
    </div>

    <!-- Header -->
    <div class="bg-postal-green text-white py-4">
        <div class="flex items-center justify-between mb-6 mobile-content">
            <svg class="w-6 h-6 cursor-pointer" fill="none" stroke="currentColor" viewBox="0 0 24 24" onclick="goBack()">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            <h1 class="text-lg font-medium">交易统计</h1>
            <div class="flex items-center space-x-3">
                <div class="flex space-x-1">
                    <div class="w-1 h-1 bg-white rounded-full"></div>
                    <div class="w-1 h-1 bg-white rounded-full"></div>
                    <div class="w-1 h-1 bg-white rounded-full"></div>
                </div>
                <div class="w-6 h-6 border-2 border-white rounded-full flex items-center justify-center">
                    <div class="w-2 h-2 bg-white rounded-full"></div>
                </div>
            </div>
        </div>

        <!-- Date Range Selector -->
        <div class="flex items-center space-x-2 text-sm mobile-content">
            <span>时间</span>
            <div class="flex items-center space-x-2">
                <select class="bg-white text-black px-3 py-1 rounded border-none outline-none">
                    <option>2025-01-18</option>
                </select>
                <span>-</span>
                <select class="bg-white text-black px-3 py-1 rounded border-none outline-none">
                    <option>2025-09-18</option>
                </select>
                <button class="bg-transparent border border-white px-4 py-1 rounded text-white hover:bg-white hover:text-postal-green transition-colors">
                    查询
                </button>
            </div>
        </div>
    </div>

    <!-- Summary Statistics -->
    <div class="bg-white mt-4 rounded-lg shadow-sm mobile-content">
        <div class="grid grid-cols-2 divide-x divide-gray-200">
            <div class="p-6 text-center">
                <div class="text-gray-600 text-sm mb-2">累计笔数</div>
                <div class="text-3xl font-bold text-gray-900">528</div>
            </div>
            <div class="p-6 text-center">
                <div class="text-gray-600 text-sm mb-2">累计金额</div>
                <div class="text-3xl font-bold text-gray-900">14.86</div>
            </div>
        </div>
    </div>

    <!-- Data Table -->
    <div class="bg-white mt-4 rounded-lg shadow-sm mobile-content">
        <!-- Table Header -->
        <div class="bg-gray-50 px-4 py-3 grid grid-cols-12 gap-4 text-sm text-gray-600 border-b border-gray-200">
            <div class="col-span-4">商户名称</div>
            <div class="col-span-2 flex items-center justify-center cursor-pointer" onclick="toggleSort('count')">
                <span>笔数</span>
                <!-- Updated to use custom sort icon with two triangles -->
                <div id="count-sort-icon" class="ml-1">
                    <svg width="16" height="16" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.3079 11.9607L14.8968 0.394236C14.9913 0.288834 15.107 0.20453 15.2362 0.146816C15.3655 0.0891015 15.5055 0.0592728 15.6471 0.0592728C15.7887 0.0592728 15.9287 0.0891015 16.0579 0.146816C16.1872 0.20453 16.3029 0.288834 16.3974 0.394236L25.9386 11.9607C26.0683 12.1053 26.1533 12.2844 26.1833 12.4763C26.2133 12.6683 26.187 12.8648 26.1076 13.0421C26.0282 13.2194 25.8991 13.3699 25.736 13.4753C25.5728 13.5808 25.3825 13.6366 25.1883 13.6362H6.05504C5.86104 13.636 5.67123 13.5797 5.50854 13.474C5.34584 13.3684 5.21722 13.2178 5.13821 13.0407C5.0592 12.8635 5.03318 12.6672 5.06329 12.4756C5.0934 12.2839 5.17836 12.1051 5.3079 11.9607Z" fill="#999999"/>
                        <path d="M5.3079 20.0966L14.8968 31.6662C15.2974 32.1113 15.9968 32.1113 16.3974 31.6662L25.9386 20.0934C26.0673 19.9487 26.1514 19.7698 26.1809 19.5784C26.2103 19.387 26.1838 19.1912 26.1045 19.0145C26.0252 18.8378 25.8966 18.6878 25.734 18.5825C25.5715 18.4772 25.3825 18.4211 25.1883 18.4211H6.05504C5.86104 18.4218 5.67123 18.4782 5.50854 18.5838C5.34584 18.6893 5.21722 18.8393 5.13821 19.0159C5.0592 19.1925 5.03318 19.3881 5.06329 19.5792C5.0934 19.7703 5.17938 19.9489 5.3079 20.0934V20.0966Z" fill="#999999"/>
                    </svg>
                </div>
            </div>
            <div class="col-span-3 flex items-center justify-center cursor-pointer" onclick="toggleSort('amount')">
                <span>金额</span>
                <!-- Updated to use custom sort icon with two triangles -->
                <div id="amount-sort-icon" class="ml-1">
                    <svg width="16" height="16" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.3079 11.9607L14.8968 0.394236C14.9913 0.288834 15.107 0.20453 15.2362 0.146816C15.3655 0.0891015 15.5055 0.0592728 15.6471 0.0592728C15.7887 0.0592728 15.9287 0.0891015 16.0579 0.146816C16.1872 0.20453 16.3029 0.288834 16.3974 0.394236L25.9386 11.9607C26.0683 12.1053 26.1533 12.2844 26.1833 12.4763C26.2133 12.6683 26.187 12.8648 26.1076 13.0421C26.0282 13.2194 25.8991 13.3699 25.736 13.4753C25.5728 13.5808 25.3825 13.6366 25.1883 13.6362H6.05504C5.86104 13.636 5.67123 13.5797 5.50854 13.474C5.34584 13.3684 5.21722 13.2178 5.13821 13.0407C5.0592 12.8635 5.03318 12.6672 5.06329 12.4756C5.0934 12.2839 5.17836 12.1051 5.3079 11.9607Z" fill="#999999"/>
                        <path d="M5.3079 20.0966L14.8968 31.6662C15.2974 32.1113 15.9968 32.1113 16.3974 31.6662L25.9386 20.0934C26.0673 19.9487 26.1514 19.7698 26.1809 19.5784C26.2103 19.387 26.1838 19.1912 26.1045 19.0145C26.0252 18.8378 25.8966 18.6878 25.734 18.5825C25.5715 18.4772 25.3825 18.4211 25.1883 18.4211H6.05504C5.86104 13.636 5.67123 13.5797 5.50854 13.474C5.34584 13.3684 5.21722 13.2178 5.13821 13.0407C5.0592 12.8635 5.03318 12.6672 5.06329 12.4756C5.0934 12.2839 5.17836 12.1051 5.3079 20.0934V20.0966Z" fill="#999999"/>
                    </svg>
                </div>
            </div>
            <div class="col-span-3 text-center">操作</div>
        </div>

        <!-- Table Body -->
        <div id="table-body">
            <div class="px-4 py-4 grid grid-cols-12 gap-4 text-sm border-b border-gray-100 hover:bg-gray-50">
                <div class="col-span-4 text-gray-900">巨堤神的咖啡店</div>
                <div class="col-span-2 text-center text-gray-900">528</div>
                <div class="col-span-3 text-center text-gray-900">14.86</div>
                <div class="col-span-3 text-center">
                    <button onclick="viewMerchantDetail('巨堤神的咖啡店')" class="text-blue-600 cursor-pointer text-xs hover:underline">
                        详情
                    </button>
                </div>
            </div>
            <!-- Additional sample data for demonstration -->
            <div class="px-4 py-4 grid grid-cols-12 gap-4 text-sm border-b border-gray-100 hover:bg-gray-50">
                <div class="col-span-4 text-gray-900">星巴克咖啡</div>
                <div class="col-span-2 text-center text-gray-900">342</div>
                <div class="col-span-3 text-center text-gray-900">25.60</div>
                <div class="col-span-3 text-center">
                    <button onclick="viewMerchantDetail('星巴克咖啡')" class="text-blue-600 cursor-pointer text-xs hover:underline">
                        详情
                    </button>
                </div>
            </div>
            <div class="px-4 py-4 grid grid-cols-12 gap-4 text-sm border-b border-gray-100 hover:bg-gray-50">
                <div class="col-span-4 text-gray-900">麦当劳</div>
                <div class="col-span-2 text-center text-gray-900">156</div>
                <div class="col-span-3 text-center text-gray-900">8.90</div>
                <div class="col-span-3 text-center">
                    <button onclick="viewMerchantDetail('麦当劳')" class="text-blue-600 cursor-pointer text-xs hover:underline">
                        详情
                    </button>
                </div>
            </div>
            <div class="px-4 py-4 grid grid-cols-12 gap-4 text-sm hover:bg-gray-50">
                <div class="col-span-4 text-gray-900">肯德基</div>
                <div class="col-span-2 text-center text-gray-900">89</div>
                <div class="col-span-3 text-center text-gray-900">12.30</div>
                <div class="col-span-3 text-center">
                    <span onclick="viewMerchantDetail('肯德基')" class="text-blue-600 cursor-pointer text-xs hover:underline">
                        详情
                    </span>
                </div>
            </div>
        </div>
    </div>

    <script>
        /**
         * 返回首页
         */
        function goBack() {
            window.location.href = 'index.html';
        }

        // Sorting state: 0 = no sort, 1 = ascending, 2 = descending
        let sortState = {
            count: 0,
            amount: 0
        };

        // Sample data for sorting
        let tableData = [
            { name: '巨堤神的咖啡店', count: 528, amount: 14.86 },
            { name: '星巴克咖啡', count: 342, amount: 25.60 },
            { name: '麦当劳', count: 156, amount: 8.90 },
            { name: '肯德基', count: 89, amount: 12.30 }
        ];

        function toggleSort(column) {
            // Reset other column's sort state
            Object.keys(sortState).forEach(key => {
                if (key !== column) {
                    sortState[key] = 0;
                    updateSortIcon(key, 0);
                }
            });

            // Toggle current column's sort state
            sortState[column] = (sortState[column] + 1) % 3;
            updateSortIcon(column, sortState[column]);

            // Sort data
            sortData(column, sortState[column]);
        }

        function updateSortIcon(column, state) {
            const iconContainer = document.getElementById(`${column}-sort-icon`);
            const svg = iconContainer.querySelector('svg');
            
            switch(state) {
                case 0: // Default - both triangles gray
                    svg.innerHTML = `
                        <path d="M5.3079 11.9607L14.8968 0.394236C14.9913 0.288834 15.107 0.20453 15.2362 0.146816C15.3655 0.0891015 15.5055 0.0592728 15.6471 0.0592728C15.7887 0.0592728 15.9287 0.0891015 16.0579 0.146816C16.1872 0.20453 16.3029 0.288834 16.3974 0.394236L25.9386 11.9607C26.0683 12.1053 26.1533 12.2844 26.1833 12.4763C26.2133 12.6683 26.187 12.8648 26.1076 13.0421C26.0282 13.2194 25.8991 13.3699 25.736 13.4753C25.5728 13.5808 25.3825 13.6366 25.1883 13.6362H6.05504C5.86104 13.636 5.67123 13.5797 5.50854 13.474C5.34584 13.3684 5.21722 13.2178 5.13821 13.0407C5.0592 12.8635 5.03318 12.6672 5.06329 12.4756C5.0934 12.2839 5.17836 12.1051 5.3079 11.9607Z" fill="#999999"/>
                        <path d="M5.3079 20.0966L14.8968 31.6662C15.2974 32.1113 15.9968 32.1113 16.3974 31.6662L25.9386 20.0934C26.0673 19.9487 26.1514 19.7698 26.1809 19.5784C26.2103 19.387 26.1838 19.1912 26.1045 19.0145C26.0252 18.8378 25.8966 18.6878 25.734 18.5825C25.5715 18.4772 25.3819 18.4211 25.1883 18.4211H6.05505C5.86165 18.4218 5.67256 18.4782 5.51048 18.5838C5.34841 18.6893 5.22023 18.8393 5.14134 19.0159C5.06245 19.1925 5.0362 19.3881 5.06575 19.5792C5.0953 19.7703 5.17938 19.9489 5.3079 20.0934V20.0966Z" fill="#999999"/>
                    `;
                    break;
                case 1: // Ascending - top triangle black, bottom gray
                    svg.innerHTML = `
                        <path d="M5.3079 11.9607L14.8968 0.394238C14.9913 0.288836 15.107 0.204532 15.2362 0.146818C15.3655 0.0891034 15.5055 0.0592747 15.6471 0.0592747C15.7887 0.0592747 15.9287 0.0891034 16.0579 0.146818C16.1872 0.204532 16.3029 0.288836 16.3974 0.394238L25.9386 11.9607C26.0683 12.1053 26.1533 12.2844 26.1833 12.4763C26.2133 12.6683 26.187 12.8648 26.1076 13.0421C26.0282 13.2194 25.8991 13.3699 25.736 13.4753C25.5728 13.5808 25.3826 13.6366 25.1883 13.6362H6.05504C5.86104 13.636 5.67123 13.5797 5.50854 13.474C5.34584 13.3684 5.21722 13.2178 5.13821 13.0407C5.0592 12.8635 5.03318 12.6672 5.06329 12.4756C5.0934 12.2839 5.17836 12.1051 5.3079 11.9607Z" fill="black"/>
                        <path d="M5.3079 20.0966L14.8968 31.6662C15.2974 32.1113 15.9968 32.1113 16.3974 31.6662L25.9386 20.0934C26.0673 19.9487 26.1514 19.7698 26.1809 19.5784C26.2103 19.387 26.1838 19.1912 26.1045 19.0145C26.0252 18.8378 25.8966 18.6878 25.734 18.5825C25.5715 18.4772 25.3819 18.4211 25.1883 18.4211H6.05505C5.86165 18.4218 5.67256 18.4782 5.51048 18.5838C5.34841 18.6893 5.22023 18.8393 5.14134 19.0159C5.06245 19.1925 5.0362 19.3881 5.06575 19.5792C5.0953 19.7703 5.17938 19.9489 5.3079 20.0934V20.0966Z" fill="#999999"/>
                    `;
                    break;
                case 2: // Descending - top triangle gray, bottom black
                    svg.innerHTML = `
                        <path d="M5.3079 11.9607L14.8968 0.394238C14.9913 0.288836 15.107 0.204532 15.2362 0.146818C15.3655 0.0891034 15.5055 0.0592747 15.6471 0.0592747C15.7887 0.0592747 15.9287 0.0891034 16.0579 0.146818C16.1872 0.204532 16.3029 0.288836 16.3974 0.394238L25.9386 11.9607C26.0683 12.1053 26.1533 12.2844 26.1833 12.4763C26.2133 12.6683 26.187 12.8648 26.1076 13.0421C26.0282 13.2194 25.8991 13.3699 25.736 13.4753C25.5728 13.5808 25.3826 13.6366 25.1883 13.6362H6.05504C5.86104 13.636 5.67123 13.5797 5.50854 13.474C5.34584 13.3684 5.21722 13.2178 5.13821 13.0407C5.0592 12.8635 5.03318 12.6672 5.06329 12.4756C5.0934 12.2839 5.17836 12.1051 5.3079 11.9607Z" fill="#999999"/>
                        <path d="M5.3079 20.0966L14.8968 31.6662C15.2974 32.1113 15.9968 32.1113 16.3974 31.6662L25.9386 20.0934C26.0673 19.9487 26.1514 19.7698 26.1809 19.5784C26.2103 19.387 26.1838 19.1912 26.1045 19.0145C26.0252 18.8378 25.8966 18.6878 25.734 18.5825C25.5715 18.4772 25.3819 18.4211 25.1883 18.4211H6.05505C5.86165 18.4218 5.67256 18.4782 5.51048 18.5838C5.34841 18.6893 5.22023 18.8393 5.14134 19.0159C5.06245 19.1925 5.0362 19.3881 5.06575 19.5792C5.0953 19.7703 5.17938 19.9489 5.3079 20.0934V20.0966Z" fill="black"/>
                    `;
                    break;
            }
        }

        function sortData(column, state) {
            if (state === 0) {
                // Reset to original order
                tableData = [
                    { name: '巨堤神的咖啡店', count: 528, amount: 14.86 },
                    { name: '星巴克咖啡', count: 342, amount: 25.60 },
                    { name: '麦当劳', count: 156, amount: 8.90 },
                    { name: '肯德基', count: 89, amount: 12.30 }
                ];
            } else {
                tableData.sort((a, b) => {
                    const aVal = a[column];
                    const bVal = b[column];
                    
                    if (state === 1) { // Ascending
                        return aVal - bVal;
                    } else { // Descending
                        return bVal - aVal;
                    }
                });
            }
            
            renderTable();
        }

        function renderTable() {
            const tableBody = document.getElementById('table-body');
            tableBody.innerHTML = '';
            
            tableData.forEach((row, index) => {
                const isLast = index === tableData.length - 1;
                const borderClass = isLast ? '' : 'border-b border-gray-100';
                
                tableBody.innerHTML += `
                    <div class="px-4 py-4 grid grid-cols-12 gap-4 text-sm ${borderClass} hover:bg-gray-50">
                        <div class="col-span-4 text-gray-900">${row.name}</div>
                        <div class="col-span-2 text-center text-gray-900">${row.count}</div>
                        <div class="col-span-3 text-center text-gray-900">${row.amount}</div>
                        <div class="col-span-3 text-center">
                            <button onclick="viewMerchantDetail('${row.name}')" class="text-blue-600 cursor-pointer text-xs hover:underline">
                                详情
                            </button>
                        </div>
                    </div>
                `;
            });
        }

        /**
         * 查看商户详情
         * @param {string} merchantName - 商户名称
         */
        function viewMerchantDetail(merchantName) {
            // 跳转到商户详情页面
            window.location.href = `merchant-detail.html?merchant=${encodeURIComponent(merchantName)}`;
        }
    </script>
</body>
</html>
